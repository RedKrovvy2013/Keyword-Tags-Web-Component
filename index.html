<!DOCTYPE html>
<html>
    <head>



    </head>

    <body>

        <keyword-tags tag-values="Billions, Westworld"></keyword-tags>

        <template id="keyword-tag-template">
            <div class="keyword-tag">
                <p class="keyword">
                </p>
                <button class="delete-btn" type="button"></button>
            </div>
        </template>

        <template id="keyword-tags-template">
            <style>
                * {
                    font-size: inherit;
                    margin: 0;
                }
                .keyword-tags-kit {
                    display: flex;
                    font-size: 17px;
                    font-family: sans-serif;
                }
                .keyword-tags {
                    display: flex;
                }
                .keyword-tag {
                    display: flex;
                }
                .delete-btn {
                    width: 1.3em;
                    height: 1.3em;
                    border: none;
                    background: url(close.svg) center center no-repeat;
                    background-size: 100% 100%;
                }
                .keyword-input {
                    /* border: none; */
                }
            </style>
            <div class="keyword-tags-kit">
                <div class="keyword-tags">
                </div>
                <input class="keyword-input" type="text">
            </div>
        </template>

        <script>

            class KeywordTags extends HTMLElement {

                constructor() {
                    super()

                    let shadow = this.attachShadow({mode: 'open'})

                    let tagsTemplate = document.getElementById('keyword-tags-template')
                    shadow.appendChild(tagsTemplate.content.cloneNode(true))

                    var keywordTagsContainer = shadow.querySelector(".keyword-tags")
                    let tagTemplate = document.getElementById('keyword-tag-template')

                    var tagValues = this.getAttribute('tag-values')
                    tagValues = tagValues.split(',')
                    tagValues.forEach(function(tagValue) {
                        tagValue = tagValue.trim()
                        var tagNode = tagTemplate.content.cloneNode(true)
                        var keywordNode = tagNode.querySelector(".keyword")
                        keywordNode.textContent = tagValue
                        keywordTagsContainer.appendChild(
                            tagNode
                        )
                    })

                }

                // called when element is added to DOM
                connectedCallback() {
                    // coouuld do creation of pre-arranged keyword tags here..
                }

            }
            customElements.define('keyword-tags', KeywordTags)

        </script>

    </body>
</html>
